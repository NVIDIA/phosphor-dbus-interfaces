description: >
    This interface provides methods for sending and receiving raw NSM commands.
    The interface allows for the communication with various NSM devices such 
    as GPUs, Switches, Bridges, Baseboards, and ERoT. The `TimeoutType` parameter 
    is used to control the command timeout behavior, either for short or long 
    running commands.

methods:
  - name: SendRecvCommand
    description: >
        Sends an NSM Raw passthrough command to an NSM device and receives the 
        corresponding response. The timeout behavior for the command execution can 
        be controlled by specifying the appropriate `TimeoutType`.
    parameters:
      - name: DeviceType
        type: byte
        description: >
            Specifies the type of NSM device the command is being sent to. 
            The following values are accepted:
            - 0: GPU
            - 1: Switch
            - 2: Bridge
            - 3: Baseboard
            - 4: ERoT
      - name: InstanceID
        type: byte
        description: >
            Specifies the instance ID of the NSM device. This value is used to 
            uniquely identify different instances of the same NSM device type.
      - name: TimeoutType
        type: enum [self.TimeoutType]
        description: >
            Specifies whether the command should have a short or long timeout. 
            This determines how long the NSM device will wait for the command to 
            complete before timing out.
      - name: MessageType
        type: byte
        description: >
            Specifies the NSM message type, following the NSM base specification.
      - name: CommandCode
        type: byte
        description: >
            The command code for the NSM command that is being sent to the device. 
            This code defines the specific operation to be performed.
      - name: PayloadFD
        type: unixfd
        description: >
            A file descriptor to the file that contains the NSM command payload
            bytes.
    returns:
      - name: CompletionCode
        type: byte
        description: >
            Specifies the NSM command completion code. A value of 0 indicates 
            success, while any other value indicates a failure, as defined in 
            the NSM specification.
      - name: ReasonCode
        type: uint16
        description: >
            Provides an optional reason code that offers additional information 
            about the command's completion, especially in the case of failure.
      - name: CommandResponse
        type: unixfd
        description: >
            A file descriptor that points to the file containing the NSM command 
            response payload returned by the device.

enumerations:
  - name: TimeoutType
    description: >
        Specifies the timeout behavior for NSM commands, controlling whether 
        the command is treated as short or long running.
    values:
      - name: ShortTimeout
        description: >
            A short-running command, adhering to standard timing requirements.
      - name: LongTimeout
        description: >
            A long-running command, allowing extended time to complete the operation.
